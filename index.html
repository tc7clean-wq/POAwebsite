<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DirectNotaryAZ - Online Notary Service</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans text-gray-800">

  <!-- Header -->
  <header class="bg-blue-600 text-white py-6 shadow">
    <div class="max-w-5xl mx-auto text-center">
      <h1 class="text-3xl font-bold">DirectNotaryAZ</h1>
      <p class="text-lg">Fast, secure, and legal online notarization — available in all 50 states.</p>
    </div>
  </header>

  <!-- Main Form -->
  <main class="max-w-3xl mx-auto mt-10 bg-white shadow rounded p-8">
    <h2 class="text-2xl font-bold mb-6 text-center">Start Your Online Notarization</h2>

    <form id="notaryForm" class="space-y-5">

      <!-- Full Name -->
      <div>
        <label class="block font-semibold mb-1">Full Name</label>
        <input type="text" name="fullName" required class="w-full border rounded px-3 py-2"/>
      </div>

      <!-- Email -->
      <div>
        <label class="block font-semibold mb-1">Email</label>
        <input type="email" name="email" required class="w-full border rounded px-3 py-2"/>
      </div>

      <!-- Phone -->
      <div>
        <label class="block font-semibold mb-1">Phone</label>
        <input type="tel" name="phone" required class="w-full border rounded px-3 py-2"/>
      </div>

      <!-- Document Upload -->
      <div>
        <label class="block font-semibold mb-1">Upload Document(s)</label>
        <input type="file" id="documents" name="documents" multiple required class="w-full"/>
        <p class="text-sm text-gray-500">Accepted: PDF, DOCX. Max 10MB each.</p>
      </div>

      <!-- Number of Signers -->
      <div>
        <label class="block font-semibold mb-1">Number of Signers</label>
        <input type="number" id="numSigners" name="numSigners" value="1" min="1" required class="w-full border rounded px-3 py-2"/>
      </div>

      <!-- ID Upload -->
      <div>
        <label class="block font-semibold mb-1">Upload Government ID</label>
        <input type="file" name="idVerification" required class="w-full"/>
        <p class="text-sm text-gray-500">Driver’s license, Passport, or State ID.</p>
      </div>

      <!-- Session Time -->
      <div>
        <label class="block font-semibold mb-1">Preferred Session Time</label>
        <input type="datetime-local" name="sessionTime" class="w-full border rounded px-3 py-2"/>
        <p class="text-sm text-gray-500">Leave blank for next available notary.</p>
      </div>

      <!-- Price Display -->
      <div class="text-center text-xl font-bold bg-gray-100 py-4 rounded">
        Total Price: $<span id="totalPrice">39</span>
      </div>

      <!-- PayPal -->
      <div id="paypal-button-container" class="mt-6"></div>

    </form>
  </main>

  <!-- Footer -->
  <footer class="mt-12 py-6 text-center text-gray-600 text-sm">
    <p>© 2025 DirectNotaryAZ. All Rights Reserved.</p>
    <p><a href="#" class="underline">Terms of Service</a> | <a href="#" class="underline">Privacy Policy</a></p>
  </footer>

  <!-- PayPal SDK -->
  <script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_SANDBOX_CLIENT_ID&currency=USD"></script>

  <script>
    const basePrice = 39;
    const extraPrice = 5;

    const documentsInput = document.getElementById('documents');
    const numSignersInput = document.getElementById('numSigners');
    const totalPriceSpan = document.getElementById('totalPrice');

    function calculatePrice() {
      const numDocuments = documentsInput.files.length || 1;
      const numSigners = parseInt(numSignersInput.value) || 1;
      const extras = (numDocuments - 1) + (numSigners - 1);
      const total = basePrice + extras * extraPrice;
      totalPriceSpan.textContent = total;
      return total;
    }

    documentsInput.addEventListener('change', calculatePrice);
    numSignersInput.addEventListener('input', calculatePrice);

    paypal.Buttons({
      createOrder: function(data, actions) {
        const totalAmount = calculatePrice();
        return actions.order.create({
          purchase_units: [{ amount: { value: totalAmount.toString() } }]
        });
      },
      onApprove: function(data, actions) {
        return actions.order.capture().then(function(details) {
          alert('Payment completed by ' + details.payer.name.given_name);

          // Collect form data
          const form = document.getElementById('notaryForm');
          const formData = new FormData(form);
          formData.append('paypalOrderId', data.orderID);

          // Send to backend API
          fetch('/api/initiate', {
            method: 'POST',
            body: formData
          }).then(res => res.json())
            .then(res => {
              if (res.success) {
                alert('Notarization session initiated successfully!');
              } else {
                alert('There was an issue initiating your notarization.');
              }
            });
        });
      }
    }).render('#paypal-button-container');

    calculatePrice(); // Initial
  </script>
</body>
</html>
